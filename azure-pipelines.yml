trigger:
- main

pool:
  vmImage: ubuntu-latest

variables:
  resourceGroup: haneenweu
  containerAppName: acahaneen
  environmentName: managedEnvironment-haneenweu-8ec8
  location: westeurope
  imageName: nginx:latest

steps:
- task: AzureCLI@2
  inputs:
    azureSubscription: '8e08d5d6-7dbc-4fe5-8da3-8f773ce909c7'
    scriptType: bash
    scriptLocation: inlineScript
    inlineScript: |
     # Create Container App with external ingress
      az containerapp create \
        --name ${{ variables.containerAppName }} \
        --resource-group ${{ variables.resourceGroup }} \
        --environment ${{ variables.environmentName }} \
        --image ${{ variables.imageName }} \
        --target-port 80 \
        --ingress external \
        --transport http
    displayName: 'Deploy Nginx to Azure Container Apps'
